<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="What’s Next" href="next.html" /><link rel="prev" title="Matrices" href="matrices.html" />
        <link rel="canonical" href="https://docs.sympy.org/latest/tutorials/intro-tutorial/manipulation.html" />

    <link rel="shortcut icon" href="../../_static/sympy-notailtext-favicon.ico"/><!-- Generated with Sphinx 7.2.5 and Furo 2023.08.19 -->
        <title>Advanced Expression Manipulation - SymPy 1.13.dev documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=16cf08d2" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=30c876b7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #52833A;
  --color-brand-content: #307748;
  --color-sidebar-background: #3B5526;
  --color-sidebar-background-border: var(--color-background-primary);
  --color-sidebar-link-text: #FFFFFF;
  --color-sidebar-brand-text: var(--color-sidebar-link-text--top-level);
  --color-sidebar-link-text--top-level: #FFFFFF;
  --color-sidebar-item-background--hover: var(--color-brand-primary);
  --color-sidebar-item-expander-background--hover: var(--color-brand-primary);
  --color-link-underline--hover: var(--color-link);
  --color-api-keyword: #000000bd;
  --color-api-name: var(--color-brand-content);
  --color-api-pre-name: var(--color-brand-content);
  --api-font-size: var(--font-size--normal);
  --color-foreground-secondary: #53555B;
  --color-admonition-title-background--seealso: #CCCCCC;
  --color-admonition-title--seealso: black;
  --color-admonition-title-background--note: #CCCCCC;
  --color-admonition-title--note: black;
  --color-admonition-title-background--warning: var(--color-problematic);
  --color-admonition-title--warning: white;
  --admonition-font-size: var(--font-size--normal);
  --admonition-title-font-size: var(--font-size--normal);
  --color-code-background: hsl(80deg 100% 95%);
  --code-font-size: var(--font-size--small);
  --font-stack--monospace: DejaVu Sans Mono,"SFMono-Regular",Menlo,Consolas,Monaco,Liberation Mono,Lucida Console,monospace;;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #33CB33;
  --color-brand-content: #1DBD1D;
  --color-sidebar-background: #3B5526;
  --color-sidebar-background-border: var(--color-background-primary);
  --color-sidebar-link-text: #FFFFFF;
  --color-sidebar-brand-text: var(--color-sidebar-link-text--top-level);
  --color-sidebar-link-text--top-level: #FFFFFF;
  --color-sidebar-item-background--hover: #52833A;
  --color-sidebar-item-expander-background--hover: #52833A;
  --color-link-underline--hover: var(--color-link);
  --color-api-keyword: #FFFFFFbd;
  --color-api-name: var(--color-brand-content);
  --color-api-pre-name: var(--color-brand-content);
  --api-font-size: var(--font-size--normal);
  --color-foreground-secondary: #9DA1AC;
  --color-admonition-title-background--seealso: #555555;
  --color-admonition-title--seealso: black;
  --color-admonition-title-background--note: #555555;
  --color-admonition-title--note: black;
  --color-admonition-title-background--warning: var(--color-problematic);
  --color-admonition-title--warning: white;
  --admonition-font-size: var(--font-size--normal);
  --admonition-title-font-size: var(--font-size--normal);
  --color-code-background: hsl(80deg 100% 95%);
  --code-font-size: var(--font-size--small);
  --font-stack--monospace: DejaVu Sans Mono,"SFMono-Regular",Menlo,Consolas,Monaco,Liberation Mono,Lucida Console,monospace;;
  --color-api-overall: #FFFFFF90;
  --color-api-paren: #FFFFFF90;
  --color-problematic: #B30000;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #33CB33;
  --color-brand-content: #1DBD1D;
  --color-sidebar-background: #3B5526;
  --color-sidebar-background-border: var(--color-background-primary);
  --color-sidebar-link-text: #FFFFFF;
  --color-sidebar-brand-text: var(--color-sidebar-link-text--top-level);
  --color-sidebar-link-text--top-level: #FFFFFF;
  --color-sidebar-item-background--hover: #52833A;
  --color-sidebar-item-expander-background--hover: #52833A;
  --color-link-underline--hover: var(--color-link);
  --color-api-keyword: #FFFFFFbd;
  --color-api-name: var(--color-brand-content);
  --color-api-pre-name: var(--color-brand-content);
  --api-font-size: var(--font-size--normal);
  --color-foreground-secondary: #9DA1AC;
  --color-admonition-title-background--seealso: #555555;
  --color-admonition-title--seealso: black;
  --color-admonition-title-background--note: #555555;
  --color-admonition-title--note: black;
  --color-admonition-title-background--warning: var(--color-problematic);
  --color-admonition-title--warning: white;
  --admonition-font-size: var(--font-size--normal);
  --admonition-title-font-size: var(--font-size--normal);
  --color-code-background: hsl(80deg 100% 95%);
  --code-font-size: var(--font-size--small);
  --font-stack--monospace: DejaVu Sans Mono,"SFMono-Regular",Menlo,Consolas,Monaco,Liberation Mono,Lucida Console,monospace;;
  --color-api-overall: #FFFFFF90;
  --color-api-paren: #FFFFFF90;
  --color-problematic: #B30000;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">SymPy 1.13.dev documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/sympylogo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">SymPy 1.13.dev documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Introductory Tutorial</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Introductory Tutorial</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="preliminaries.html">Preliminaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="gotchas.html">Gotchas</a></li>
<li class="toctree-l3 current has-children"><a class="reference internal" href="features.html">SymPy Features</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of SymPy Features</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="basic_operations.html">Basic Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="printing.html">Printing</a></li>
<li class="toctree-l4"><a class="reference internal" href="simplification.html">Simplification</a></li>
<li class="toctree-l4"><a class="reference internal" href="calculus.html">Calculus</a></li>
<li class="toctree-l4"><a class="reference internal" href="solvers.html">Solvers</a></li>
<li class="toctree-l4"><a class="reference internal" href="matrices.html">Matrices</a></li>
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">Advanced Expression Manipulation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="next.html">What’s Next</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../guides/index.html">How-to Guides</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of How-to Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../guides/assumptions.html">Assumptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guides/booleans.html">Symbolic and fuzzy booleans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../guides/custom-functions.html">Writing Custom Functions</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../guides/physics/index.html">Physics</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Physics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../guides/physics/control_problems.html">Control Package Examples</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../guides/solving/index.html">Solve Equations</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Solve Equations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../guides/solving/solving-guidance.html">Solving Guidance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/solving/solve-equation-algebraically.html">Solve an Equation Algebraically</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/solving/solve-system-of-equations-algebraically.html">Solve a System of Equations Algebraically</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/solving/solve-numerically.html">Solve One or a System of Equations Numerically</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/solving/solve-ode.html">Solve an Ordinary Differential Equation (ODE) Algebraically</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/solving/find-roots-polynomial.html">Find the Roots of a Polynomial Algebraically or Numerically</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/solving/solve-matrix-equation.html">Solve a Matrix Equation Algebraically</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/solving/reduce-inequalities-algebraically.html">Reduce One or a System of Inequalities for a Single Variable Algebraically</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/solving/solve-diophantine-equation.html">Solve a Diophantine Equation Algebraically</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../guides/logo.html">SymPy Logo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../citing.html">Citing SymPy</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../explanation/index.html">Explanations</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Explanations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../explanation/gotchas.html">Gotchas and Pitfalls</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../explanation/solve_output.html">Solve Output by Type</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../explanation/special_topics/index.html">SymPy Special Topics</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of SymPy Special Topics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../explanation/special_topics/finite_diff_derivatives.html">Finite Difference Approximations to Derivatives</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../explanation/special_topics/classification.html">Classification of SymPy objects</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../explanation/active-deprecations.html">List of active deprecations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../explanation/glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../reference/index.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/public/basics/index.html">Basics</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Basics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/assumptions/index.html">Assumptions</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Assumptions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/assumptions/ask.html">Ask</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/assumptions/assume.html">Assume</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/assumptions/refine.html">Refine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/assumptions/predicates.html">Predicates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/calculus/index.html">Calculus</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/combinatorics/index.html">Combinatorics</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Combinatorics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/partitions.html">Partitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/permutations.html">Permutations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/perm_groups.html">Permutation Groups</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/polyhedron.html">Polyhedron</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/prufer.html">Prufer Sequences</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/subsets.html">Subsets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/graycode.html">Gray Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/named_groups.html">Named Groups</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/galois.html">Galois Groups</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/group_numbers.html">Nilpotent, Abelian and Cyclic Numbers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/util.html">Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/group_constructs.html">Group constructors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/testutil.html">Test Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/tensor_can.html">Tensor Canonicalization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/fp_groups.html">Finitely Presented Groups</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/combinatorics/pc_groups.html">Polycyclic Groups</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/functions/index.html">Functions</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Functions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/functions/elementary.html">Elementary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/functions/combinatorial.html">Combinatorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/functions/combinatorial.html#enumeration">Enumeration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/functions/special.html">Special</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/integrals/index.html">Integrals</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Integrals</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/integrals/g-functions.html">Computing Integrals using Meijer G-Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/integrals/integrals.html">Integrals</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/series/index.html">Series</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of Series</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/series/series.html">Series Expansions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/series/sequences.html">Sequences</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/series/fourier.html">Fourier Series</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/series/formal.html">Formal Power Series</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/series/limitseq.html">Limits of Sequences</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/simplify/index.html">Simplify</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of Simplify</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/simplify/simplify.html">Simplify</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/simplify/hyperexpand.html">Hypergeometric Expansion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/simplify/fu.html">Hongguang Fu’s Trigonometric Simplification</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/solvers/index.html">Solvers</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of Solvers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/solvers/diophantine.html">Diophantine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/solvers/inequalities.html">Inequality Solvers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/solvers/ode.html">ODE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/solvers/pde.html">PDE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/solvers/solvers.html">Solvers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/solvers/solveset.html">Solveset</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/abc.html">abc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/algebras.html">Algebras</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/concrete.html">Concrete</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/core.html">Core</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/discrete.html">Discrete</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/evalf.html">Numerical Evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/numeric-computation.html">Numeric Computation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/rewriting.html">Term Rewriting</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/public/codegeneration/index.html">Code Generation</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Code Generation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../modules/codegen.html">Code Generation</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/public/logic/index.html">Logic</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of Logic</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../modules/logic.html">Logic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/sets.html">Sets</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/public/matrices/index.html">Matrices</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of Matrices</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/matrices/index.html">Matrices</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of Matrices</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/matrices/matrices.html">Matrices (linear algebra)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/matrices/common.html">Common Matrices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/matrices/dense.html">Dense Matrices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/matrices/sparse.html">Sparse Matrices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/matrices/sparsetools.html">Sparse Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/matrices/immutablematrices.html">Immutable Matrices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/matrices/expressions.html">Matrix Expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/matrices/normalforms.html">Matrix Normal Forms</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/tensor/index.html">Tensor</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of Tensor</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/tensor/array.html">N-dim array</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/tensor/array_expressions.html">N-dim array expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/tensor/indexed.html">Indexed Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/tensor/index_methods.html">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/tensor/tensor.html">Tensor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/tensor/toperators.html">Tensor Operators</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/vector/index.html">Vector</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of Vector</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/vector/intro.html">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/vector/basics.html">Basic Implementation details</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/vector/coordsys.html">More about Coordinate Systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/vector/fields.html">Scalar and Vector Field Functionality</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/vector/examples.html">General examples of usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/vector/vector_integration.html">Applications of Vector Integrals</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../modules/vector/api/index.html">Vector API</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of Vector API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../modules/vector/api/classes.html">Essential Classes in sympy.vector (docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/vector/api/orienterclasses.html">Orienter classes (docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/vector/api/vectorfunctions.html">Essential Functions in sympy.vector (docstrings)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/public/numbertheory/index.html">Number Theory</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle navigation of Number Theory</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../modules/ntheory.html">Number Theory</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/public/physics/index.html">Physics</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle navigation of Physics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../modules/physics/hydrogen.html">Hydrogen Wavefunctions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/physics/matrices.html">Matrices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/physics/paulialgebra.html">Pauli Algebra</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/physics/qho_1d.html">Quantum Harmonic Oscillator in 1-D</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/physics/sho.html">Quantum Harmonic Oscillator in 3-D</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/physics/secondquant.html">Second Quantization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/physics/wigner.html">Wigner Symbols</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/physics/units/index.html">Unit systems</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle navigation of Unit systems</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/units/philosophy.html">Philosophy behind unit systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/units/examples.html">More examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/units/dimensions.html">Dimensions and dimension systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/units/prefixes.html">Unit prefixes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/units/unitsystem.html">Units and unit systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/units/quantities.html">Physical quantities</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/physics/hep/index.html">High energy physics</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/physics/vector/index.html">The Physics Vector Module</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><div class="visually-hidden">Toggle navigation of The Physics Vector Module</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/vector/vectors.html">Vector &amp; ReferenceFrame</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/vector/kinematics.html">Vector: Kinematics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/vector/advanced.html">Potential Issues/Advanced Topics/Future Features in Physics/Vector Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/vector/fields.html">Scalar and Vector Field Functionality</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../modules/physics/vector/api/index.html">Physics Vector API</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><div class="visually-hidden">Toggle navigation of Physics Vector API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/vector/api/classes.html">Essential Classes</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/vector/api/kinematics.html">Kinematics (Docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/vector/api/printing.html">Printing (Docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/vector/api/functions.html">Essential Functions (Docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/vector/api/fieldfunctions.html">Docstrings for basic field functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/physics/mechanics/index.html">Classical Mechanics</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><div class="visually-hidden">Toggle navigation of Classical Mechanics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/mechanics/masses.html">Masses, Inertias, Particles and Rigid Bodies in Physics/Mechanics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/mechanics/kane.html">Kane’s Method in Physics/Mechanics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/mechanics/lagrange.html">Lagrange’s Method in Physics/Mechanics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/mechanics/joints.html">Joints Framework in Physics/Mechanics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/mechanics/symsystem.html">Symbolic Systems in Physics/Mechanics</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../modules/physics/mechanics/linearize.html">Linearization in Physics/Mechanics</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><div class="visually-hidden">Toggle navigation of Linearization in Physics/Mechanics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/examples/lin_pend_nonmin_example.html">Nonminimal Coordinates Pendulum</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../modules/physics/mechanics/examples.html">Examples for Physics/Mechanics</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" role="switch" type="checkbox"/><label for="toctree-checkbox-32"><div class="visually-hidden">Toggle navigation of Examples for Physics/Mechanics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="../../modules/physics/mechanics/examples/rollingdisc_example.html">A rolling disc</a><input class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" role="switch" type="checkbox"/><label for="toctree-checkbox-33"><div class="visually-hidden">Toggle navigation of A rolling disc</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="../../modules/physics/mechanics/examples/rollingdisc_example_kane.html">A rolling disc, with Kane’s method</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../modules/physics/mechanics/examples/rollingdisc_example_kane_constraints.html">A rolling disc, with Kane’s method and constraint forces</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../modules/physics/mechanics/examples/rollingdisc_example_lagrange.html">A rolling disc using Lagrange’s Method</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/examples/bicycle_example.html">A bicycle</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/examples/lin_pend_nonmin_example.html">Nonminimal Coordinates Pendulum</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/examples/multi_degree_freedom_holonomic_system.html">Multi Degree of Freedom Holonomic System</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/examples/four_bar_linkage_example.html">A four bar linkage</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/mechanics/advanced.html">Potential Issues/Advanced Topics/Future Features in Physics/Mechanics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/mechanics/reference.html">References for Physics/Mechanics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/mechanics/autolev_parser.html">Autolev Parser</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/mechanics/sympy_mechanics_for_autolev_users.html">SymPy Mechanics for Autolev Users</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../modules/physics/mechanics/api/index.html">Mechanics API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-34" name="toctree-checkbox-34" role="switch" type="checkbox"/><label for="toctree-checkbox-34"><div class="visually-hidden">Toggle navigation of Mechanics API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/api/part_bod.html">Bodies, Inertias, Loads &amp; Other Functions (Docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/api/body.html">Body (Docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/api/kane_lagrange.html">Kane’s Method &amp; Lagrange’s Method (Docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/api/joint.html">Joints Framework (Docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/api/system.html">SymbolicSystem (Docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/api/linearize.html">Linearization (Docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/api/expr_manip.html">Expression Manipulation (Docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/api/printing.html">Printing (Docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/api/wrapping_geometry.html">Wrapping Geometry (Docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/api/pathway.html">Pathway (Docstrings)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../modules/physics/mechanics/api/actuator.html">Actuator (Docstrings)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/physics/quantum/index.html">Quantum Mechanics</a><input class="toctree-checkbox" id="toctree-checkbox-35" name="toctree-checkbox-35" role="switch" type="checkbox"/><label for="toctree-checkbox-35"><div class="visually-hidden">Toggle navigation of Quantum Mechanics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/anticommutator.html">Anticommutator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/cg.html">Clebsch-Gordan Coefficients</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/commutator.html">Commutator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/constants.html">Constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/dagger.html">Dagger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/innerproduct.html">Inner Product</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/tensorproduct.html">Tensor Product</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/cartesian.html">Cartesian Operators and States</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/hilbert.html">Hilbert Space</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/operator.html">Operator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/operatorset.html">Operator/State Helper Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/qapply.html">Qapply</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/represent.html">Represent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/spin.html">Spin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/state.html">State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/circuitplot.html">Circuit Plot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/gate.html">Gates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/grover.html">Grover’s Algorithm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/qft.html">QFT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/qubit.html">Qubit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/shor.html">Shor’s Algorithm</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/quantum/piab.html">Particle in a Box</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/physics/optics/index.html">Optics Module</a><input class="toctree-checkbox" id="toctree-checkbox-36" name="toctree-checkbox-36" role="switch" type="checkbox"/><label for="toctree-checkbox-36"><div class="visually-hidden">Toggle navigation of Optics Module</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/optics/gaussopt.html">Gaussian Optics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/optics/medium.html">Medium</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/optics/polarization.html">Polarization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/optics/utils.html">Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/optics/waves.html">Waves</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/physics/control/index.html">Control Module</a><input class="toctree-checkbox" id="toctree-checkbox-37" name="toctree-checkbox-37" role="switch" type="checkbox"/><label for="toctree-checkbox-37"><div class="visually-hidden">Toggle navigation of Control Module</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/control/control.html">Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/control/lti.html">Control API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/control/control_plots.html">Control System Plots</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/physics/continuum_mechanics/index.html">Continuum Mechanics</a><input class="toctree-checkbox" id="toctree-checkbox-38" name="toctree-checkbox-38" role="switch" type="checkbox"/><label for="toctree-checkbox-38"><div class="visually-hidden">Toggle navigation of Continuum Mechanics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/continuum_mechanics/beam.html">Beam (Docstrings)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/continuum_mechanics/beam_problems.html">Solving Beam Bending Problems using Singularity Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/continuum_mechanics/truss.html">Truss (Docstrings)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/physics/continuum_mechanics/cable.html">Cable (Docstrings)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/public/utilities/index.html">Utilities</a><input class="toctree-checkbox" id="toctree-checkbox-39" name="toctree-checkbox-39" role="switch" type="checkbox"/><label for="toctree-checkbox-39"><div class="visually-hidden">Toggle navigation of Utilities</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/testing/index.html">Testing</a><input class="toctree-checkbox" id="toctree-checkbox-40" name="toctree-checkbox-40" role="switch" type="checkbox"/><label for="toctree-checkbox-40"><div class="visually-hidden">Toggle navigation of Testing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/testing/pytest.html">pytest</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/testing/randtest.html">Randomised Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/testing/runtests.html">Run Tests</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/utilities/index.html">Utilities</a><input class="toctree-checkbox" id="toctree-checkbox-41" name="toctree-checkbox-41" role="switch" type="checkbox"/><label for="toctree-checkbox-41"><div class="visually-hidden">Toggle navigation of Utilities</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/utilities/autowrap.html">Autowrap Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/utilities/codegen.html">Codegen</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/utilities/decorator.html">Decorator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/utilities/enumerative.html">Enumerative</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/utilities/exceptions.html">Exceptions and Warnings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/utilities/iterables.html">Iterables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/utilities/lambdify.html">Lambdify</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/utilities/memoization.html">Memoization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/utilities/misc.html">Miscellaneous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/utilities/pkgdata.html">PKGDATA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/utilities/source.html">Source Code Inspection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/utilities/timeutils.html">Timing Utilities</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/interactive.html">Interactive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/parsing.html">Parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/printing.html">Printing</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/public/topics/index.html">Topics</a><input class="toctree-checkbox" id="toctree-checkbox-42" name="toctree-checkbox-42" role="switch" type="checkbox"/><label for="toctree-checkbox-42"><div class="visually-hidden">Toggle navigation of Topics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/geometry/index.html">Geometry</a><input class="toctree-checkbox" id="toctree-checkbox-43" name="toctree-checkbox-43" role="switch" type="checkbox"/><label for="toctree-checkbox-43"><div class="visually-hidden">Toggle navigation of Geometry</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/geometry/entities.html">Entities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/geometry/utils.html">Utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/geometry/points.html">Points</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/geometry/lines.html">Lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/geometry/curves.html">Curves</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/geometry/ellipses.html">Ellipses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/geometry/polygons.html">Polygons</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/geometry/plane.html">Plane</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/holonomic/index.html">Holonomic</a><input class="toctree-checkbox" id="toctree-checkbox-44" name="toctree-checkbox-44" role="switch" type="checkbox"/><label for="toctree-checkbox-44"><div class="visually-hidden">Toggle navigation of Holonomic</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/holonomic/about.html">About Holonomic Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/holonomic/represent.html">Representation of holonomic functions in SymPy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/holonomic/operations.html">Operations on holonomic functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/holonomic/convert.html">Converting other representations to holonomic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/holonomic/uses.html">Uses and Current limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/holonomic/internal.html">Internal API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/liealgebras/index.html">Lie Algebra</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../modules/polys/index.html">Polynomial Manipulation</a><input class="toctree-checkbox" id="toctree-checkbox-45" name="toctree-checkbox-45" role="switch" type="checkbox"/><label for="toctree-checkbox-45"><div class="visually-hidden">Toggle navigation of Polynomial Manipulation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../modules/polys/basics.html">Basic functionality of the module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/polys/wester.html">Examples from Wester’s Article</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/polys/reference.html">Polynomials Manipulation Module Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/polys/agca.html">AGCA - Algebraic Geometry and Commutative Algebra Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/polys/domainsintro.html">Introducing the Domains of the poly module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/polys/domainsref.html">Reference docs for the Poly Domains</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/polys/internals.html">Internals of the Polynomial Manipulation Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/polys/ringseries.html">Series Manipulation using Polynomials</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/polys/literature.html">Literature</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/polys/solvers.html">Poly solvers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/polys/domainmatrix.html">Introducing the domainmatrix of the poly module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../modules/polys/numberfields.html">Number Fields</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/categories.html">Category Theory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/crypto.html">Cryptography</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/diffgeom.html">Differential Geometry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/plotting.html">Plotting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modules/stats.html">Stats</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../contributing/index.html">Contributing</a><input class="toctree-checkbox" id="toctree-checkbox-46" name="toctree-checkbox-46" role="switch" type="checkbox"/><label for="toctree-checkbox-46"><div class="visually-hidden">Toggle navigation of Contributing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/introduction-to-contributing.html">Introduction to Contributing</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../contributing/new-contributors-guide/index.html">Guide for New Contributors</a><input class="toctree-checkbox" id="toctree-checkbox-47" name="toctree-checkbox-47" role="switch" type="checkbox"/><label for="toctree-checkbox-47"><div class="visually-hidden">Toggle navigation of Guide for New Contributors</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contributing/new-contributors-guide/dev-setup.html">Setup Development Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contributing/new-contributors-guide/workflow-process.html">Development Workflow Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contributing/new-contributors-guide/writing-tests.html">Writing Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../contributing/new-contributors-guide/build-docs.html">Building the Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/dependencies.html">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/debug.html">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/docstring.html">SymPy Docstrings Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/documentation-style-guide.html">Docstring Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/deprecations.html">Deprecation Policy</a></li>
</ul>
</li>
</ul>

</div><!-- Versions Menu. In order to work, there should be a file called versions.json one level up from the documentation listing the "dev" and "latest" version numbers, like
{
    "latest": "1.10",
    "dev": "1.11.dev"
}
-->
<div class="sidebar-tree sidebar-versions">
  <h5 class="versions-header">Documentation Version</h4>
</div>

<!-- Make sure jquery is loaded (we would put this as a separate .js, but it uses jinja templates in some of the variables) -->
<script src="../../_static/jquery.js"></script>
<script>
  var versions_json_loc = "../../../versions.json";

  function add_version_menu(json_loc) {
      var menu = document.createElement("ul");
      var thisversion = "dev"
      $.getJSON(json_loc, function(versions) {
          for (var key in versions) {
              if (key != "latest" && key != "dev") {
                  console.error("Invalid key in versions.json", key);
              } else {
                  var version = document.createElement("li")
                  version.className = "sidebar-versions-l1 sidebar-versions-" + key + "-l1";
                  if (key == thisversion){
                      version.className += " current-version";
                  }
                  var a = document.createElement("a");
                  a.className = "reference internal";
                  a.innerHTML = "SymPy " + versions[key] + " (" + key + " version)";
                  a.title = key + " version";
                  a.href = "https://docs.sympy.org/" + key + "/tutorials/intro-tutorial/manipulation.html";
                  version.appendChild(a);
                  menu.appendChild(version);
              }
          }
      }).done(function() {
          console.log("versions.json read successfully");
      }).fail(function() {
          var version = document.createElement("li")
          version.className = "sidebar-versions-l1 sidebar-versions-latest-l1";
          var d = document.createElement("div");
          d.className = "versions-not-found"
          d.innerHTML = "Other Versions Not Found";
          d.title = "The version selection menu is only available for the documentation published on docs.sympy.org";
          version.appendChild(d);
          menu.appendChild(version);
          console.error("Could not read versions.json");
      }).always(function() {
          $(".sidebar-versions").append(menu)
      });
  };

  $( document ).ready( add_version_menu(versions_json_loc));
</script></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="advanced-expression-manipulation">
<span id="tutorial-manipulation"></span><h1>Advanced Expression Manipulation<a class="headerlink" href="#advanced-expression-manipulation" title="Link to this heading">#</a></h1>
<p>In this section, we discuss some ways that we can perform advanced
manipulation of expressions.</p>
<section id="understanding-expression-trees">
<span id="tutorial-expression-trees"></span><h2>Understanding Expression Trees<a class="headerlink" href="#understanding-expression-trees" title="Link to this heading">#</a></h2>
<p>Before we can do this, we need to understand how expressions are represented
in SymPy.  A mathematical expression is represented as a tree.  Let us take
the expression <span class="math notranslate nohighlight">\(x^2 + xy\)</span>, i.e., <code class="docutils literal notranslate"><span class="pre">x**2</span> <span class="pre">+</span> <span class="pre">x*y</span></code>.  We can see what this
expression looks like internally by using <code class="docutils literal notranslate"><span class="pre">srepr</span></code></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;x y z&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">srepr</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
<span class="go">&quot;Add(Pow(Symbol(&#39;x&#39;), Integer(2)), Mul(Symbol(&#39;x&#39;), Symbol(&#39;y&#39;)))&quot;</span>
</pre></div>
</div>
<p>The easiest way to tear this apart is to look at a diagram of the expression
tree:</p>
<div class="graphviz"><object data="../../_images/graphviz-94e91a2cd5228dc9e3931abd769b8db1195da0bf.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph{

# Graph style
&quot;ordering&quot;=&quot;out&quot;
&quot;rankdir&quot;=&quot;TD&quot;

#########
# Nodes #
#########

&quot;Add(Pow(Symbol('x'), Integer(2)), Mul(Symbol('x'), Symbol('y')))_()&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Add&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Pow(Symbol('x'), Integer(2))_(0,)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Pow&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Symbol('x')_(0, 0)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Symbol('x')&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Integer(2)_(0, 1)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Integer(2)&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Mul(Symbol('x'), Symbol('y'))_(1,)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Mul&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Symbol('x')_(1, 0)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Symbol('x')&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Symbol('y')_(1, 1)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Symbol('y')&quot;, &quot;shape&quot;=&quot;ellipse&quot;];

#########
# Edges #
#########

&quot;Add(Pow(Symbol('x'), Integer(2)), Mul(Symbol('x'), Symbol('y')))_()&quot; -&gt; &quot;Pow(Symbol('x'), Integer(2))_(0,)&quot;;
&quot;Add(Pow(Symbol('x'), Integer(2)), Mul(Symbol('x'), Symbol('y')))_()&quot; -&gt; &quot;Mul(Symbol('x'), Symbol('y'))_(1,)&quot;;
&quot;Pow(Symbol('x'), Integer(2))_(0,)&quot; -&gt; &quot;Symbol('x')_(0, 0)&quot;;
&quot;Pow(Symbol('x'), Integer(2))_(0,)&quot; -&gt; &quot;Integer(2)_(0, 1)&quot;;
&quot;Mul(Symbol('x'), Symbol('y'))_(1,)&quot; -&gt; &quot;Symbol('x')_(1, 0)&quot;;
&quot;Mul(Symbol('x'), Symbol('y'))_(1,)&quot; -&gt; &quot;Symbol('y')_(1, 1)&quot;;
}</p></object></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The above diagram was made using <a class="reference external" href="https://www.graphviz.org/">Graphviz</a> and
the <a class="reference internal" href="../../modules/printing.html#sympy.printing.dot.dotprint" title="sympy.printing.dot.dotprint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dotprint</span></code></a> function.</p>
</div>
<p>First, let’s look at the leaves of this tree.  Symbols are instances of the
class Symbol.  While we have been doing</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>we could have also done</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Either way, we get a Symbol with the name “x” <a class="footnote-reference brackets" href="#symbols-fn" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.  For the number in the
expression, 2, we got <code class="docutils literal notranslate"><span class="pre">Integer(2)</span></code>.  <code class="docutils literal notranslate"><span class="pre">Integer</span></code> is the SymPy class for
integers.  It is similar to the Python built-in type <code class="docutils literal notranslate"><span class="pre">int</span></code>, except that
<code class="docutils literal notranslate"><span class="pre">Integer</span></code> plays nicely with other SymPy types.</p>
<p>When we write <code class="docutils literal notranslate"><span class="pre">x**2</span></code>, this creates a <code class="docutils literal notranslate"><span class="pre">Pow</span></code> object.  <code class="docutils literal notranslate"><span class="pre">Pow</span></code> is short for
“power”.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">srepr</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&quot;Pow(Symbol(&#39;x&#39;), Integer(2))&quot;</span>
</pre></div>
</div>
<p>We could have created the same object by calling <code class="docutils literal notranslate"><span class="pre">Pow(x,</span> <span class="pre">2)</span></code></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">x**2</span>
</pre></div>
</div>
<p>Note that in the <code class="docutils literal notranslate"><span class="pre">srepr</span></code> output, we see <code class="docutils literal notranslate"><span class="pre">Integer(2)</span></code>, the SymPy version of
integers, even though technically, we input <code class="docutils literal notranslate"><span class="pre">2</span></code>, a Python int.  In general,
whenever you combine a SymPy object with a non-SymPy object via some function
or operation, the non-SymPy object will be converted into a SymPy object.  The
function that does this is <code class="docutils literal notranslate"><span class="pre">sympify</span></code> <a class="footnote-reference brackets" href="#sympify-fn" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&lt;... &#39;int&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">sympify</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="go">&lt;class &#39;sympy.core.numbers.Integer&#39;&gt;</span>
</pre></div>
</div>
<p>We have seen that <code class="docutils literal notranslate"><span class="pre">x**2</span></code> is represented as <code class="docutils literal notranslate"><span class="pre">Pow(x,</span> <span class="pre">2)</span></code>.  What about
<code class="docutils literal notranslate"><span class="pre">x*y</span></code>?  As we might expect, this is the multiplication of <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>.
The SymPy class for multiplication is <code class="docutils literal notranslate"><span class="pre">Mul</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">srepr</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">)</span>
<span class="go">&quot;Mul(Symbol(&#39;x&#39;), Symbol(&#39;y&#39;))&quot;</span>
</pre></div>
</div>
<p>Thus, we could have created the same object by writing <code class="docutils literal notranslate"><span class="pre">Mul(x,</span> <span class="pre">y)</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Mul</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="go">x*y</span>
</pre></div>
</div>
<p>Now we get to our final expression, <code class="docutils literal notranslate"><span class="pre">x**2</span> <span class="pre">+</span> <span class="pre">x*y</span></code>.  This is the addition of
our last two objects, <code class="docutils literal notranslate"><span class="pre">Pow(x,</span> <span class="pre">2)</span></code>, and <code class="docutils literal notranslate"><span class="pre">Mul(x,</span> <span class="pre">y)</span></code>.  The SymPy class for
addition is <code class="docutils literal notranslate"><span class="pre">Add</span></code>, so, as you might expect, to create this object, we use
<code class="docutils literal notranslate"><span class="pre">Add(Pow(x,</span> <span class="pre">2),</span> <span class="pre">Mul(x,</span> <span class="pre">y))</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Add</span><span class="p">(</span><span class="n">Pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">Mul</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
<span class="go">x**2 + x*y</span>
</pre></div>
</div>
<p>SymPy expression trees can have many branches, and can be quite deep or quite
broad.  Here is a more complicated example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">srepr</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
<span class="go">&quot;Add(Mul(Integer(-1), Pow(Symbol(&#39;x&#39;), Integer(2))), Mul(Rational(1, 2),</span>
<span class="go">sin(Mul(Symbol(&#39;x&#39;), Symbol(&#39;y&#39;)))), Pow(Symbol(&#39;y&#39;), Integer(-1)))&quot;</span>
</pre></div>
</div>
<p>Here is a diagram</p>
<div class="graphviz"><object data="../../_images/graphviz-06934fab36ed45716e2be32cffa6a667e3c81348.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph{

# Graph style
&quot;rankdir&quot;=&quot;TD&quot;

#########
# Nodes #
#########

&quot;Half()_(0, 0)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Rational(1, 2)&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Symbol(y)_(2, 0)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Symbol('y')&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Symbol(x)_(1, 1, 0)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Symbol('x')&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Integer(2)_(1, 1, 1)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Integer(2)&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;NegativeOne()_(2, 1)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Integer(-1)&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;NegativeOne()_(1, 0)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Integer(-1)&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Symbol(y)_(0, 1, 0, 1)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Symbol('y')&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Symbol(x)_(0, 1, 0, 0)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Symbol('x')&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Pow(Symbol(x), Integer(2))_(1, 1)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Pow&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Pow(Symbol(y), NegativeOne())_(2,)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Pow&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Mul(Symbol(x), Symbol(y))_(0, 1, 0)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Mul&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;sin(Mul(Symbol(x), Symbol(y)))_(0, 1)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;sin&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Mul(Half(), sin(Mul(Symbol(x), Symbol(y))))_(0,)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Mul&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Mul(NegativeOne(), Pow(Symbol(x), Integer(2)))_(1,)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Mul&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Add(Mul(Half(), sin(Mul(Symbol(x), Symbol(y)))), Mul(NegativeOne(), Pow(Symbol(x), Integer(2))), Pow(Symbol(y), NegativeOne()))_()&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Add&quot;, &quot;shape&quot;=&quot;ellipse&quot;];

#########
# Edges #
#########

&quot;Pow(Symbol(y), NegativeOne())_(2,)&quot; -&gt; &quot;Symbol(y)_(2, 0)&quot;;
&quot;Pow(Symbol(x), Integer(2))_(1, 1)&quot; -&gt; &quot;Symbol(x)_(1, 1, 0)&quot;;
&quot;Pow(Symbol(x), Integer(2))_(1, 1)&quot; -&gt; &quot;Integer(2)_(1, 1, 1)&quot;;
&quot;Pow(Symbol(y), NegativeOne())_(2,)&quot; -&gt; &quot;NegativeOne()_(2, 1)&quot;;
&quot;Mul(Symbol(x), Symbol(y))_(0, 1, 0)&quot; -&gt; &quot;Symbol(x)_(0, 1, 0, 0)&quot;;
&quot;Mul(Symbol(x), Symbol(y))_(0, 1, 0)&quot; -&gt; &quot;Symbol(y)_(0, 1, 0, 1)&quot;;
&quot;Mul(Half(), sin(Mul(Symbol(x), Symbol(y))))_(0,)&quot; -&gt; &quot;Half()_(0, 0)&quot;;
&quot;Mul(NegativeOne(), Pow(Symbol(x), Integer(2)))_(1,)&quot; -&gt; &quot;NegativeOne()_(1, 0)&quot;;
&quot;sin(Mul(Symbol(x), Symbol(y)))_(0, 1)&quot; -&gt; &quot;Mul(Symbol(x), Symbol(y))_(0, 1, 0)&quot;;
&quot;Mul(NegativeOne(), Pow(Symbol(x), Integer(2)))_(1,)&quot; -&gt; &quot;Pow(Symbol(x), Integer(2))_(1, 1)&quot;;
&quot;Mul(Half(), sin(Mul(Symbol(x), Symbol(y))))_(0,)&quot; -&gt; &quot;sin(Mul(Symbol(x), Symbol(y)))_(0, 1)&quot;;
&quot;Add(Mul(Half(), sin(Mul(Symbol(x), Symbol(y)))), Mul(NegativeOne(), Pow(Symbol(x), Integer(2))), Pow(Symbol(y), NegativeOne()))_()&quot; -&gt; &quot;Pow(Symbol(y), NegativeOne())_(2,)&quot;;
&quot;Add(Mul(Half(), sin(Mul(Symbol(x), Symbol(y)))), Mul(NegativeOne(), Pow(Symbol(x), Integer(2))), Pow(Symbol(y), NegativeOne()))_()&quot; -&gt; &quot;Mul(Half(), sin(Mul(Symbol(x), Symbol(y))))_(0,)&quot;;
&quot;Add(Mul(Half(), sin(Mul(Symbol(x), Symbol(y)))), Mul(NegativeOne(), Pow(Symbol(x), Integer(2))), Pow(Symbol(y), NegativeOne()))_()&quot; -&gt; &quot;Mul(NegativeOne(), Pow(Symbol(x), Integer(2)))_(1,)&quot;;
}</p></object></div>
<p>This expression reveals some interesting things about SymPy expression
trees. Let’s go through them one by one.</p>
<p>Let’s first look at the term <code class="docutils literal notranslate"><span class="pre">x**2</span></code>.  As we expected, we see <code class="docutils literal notranslate"><span class="pre">Pow(x,</span> <span class="pre">2)</span></code>.
One level up, we see we have <code class="docutils literal notranslate"><span class="pre">Mul(-1,</span> <span class="pre">Pow(x,</span> <span class="pre">2))</span></code>.  There is no subtraction
class in SymPy.  <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">-</span> <span class="pre">y</span></code> is represented as <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">-y</span></code>, or, more completely,
<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">-1*y</span></code>, i.e., <code class="docutils literal notranslate"><span class="pre">Add(x,</span> <span class="pre">Mul(-1,</span> <span class="pre">y))</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">srepr</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span>
<span class="go">&quot;Add(Symbol(&#39;x&#39;), Mul(Integer(-1), Symbol(&#39;y&#39;)))&quot;</span>
</pre></div>
</div>
<div class="graphviz"><object data="../../_images/graphviz-44913354328a584537251c7b63e61de425fd48b0.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph{

# Graph style
&quot;rankdir&quot;=&quot;TD&quot;

#########
# Nodes #
#########

&quot;Symbol(x)_(1,)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Symbol('x')&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Symbol(y)_(0, 1)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Symbol('y')&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;NegativeOne()_(0, 0)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Integer(-1)&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Mul(NegativeOne(), Symbol(y))_(0,)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Mul&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Add(Mul(NegativeOne(), Symbol(y)), Symbol(x))_()&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Add&quot;, &quot;shape&quot;=&quot;ellipse&quot;];

#########
# Edges #
#########

&quot;Mul(NegativeOne(), Symbol(y))_(0,)&quot; -&gt; &quot;Symbol(y)_(0, 1)&quot;;
&quot;Mul(NegativeOne(), Symbol(y))_(0,)&quot; -&gt; &quot;NegativeOne()_(0, 0)&quot;;
&quot;Add(Mul(NegativeOne(), Symbol(y)), Symbol(x))_()&quot; -&gt; &quot;Symbol(x)_(1,)&quot;;
&quot;Add(Mul(NegativeOne(), Symbol(y)), Symbol(x))_()&quot; -&gt; &quot;Mul(NegativeOne(), Symbol(y))_(0,)&quot;;
}</p></object></div>
<p>Next, look at <code class="docutils literal notranslate"><span class="pre">1/y</span></code>.  We might expect to see something like <code class="docutils literal notranslate"><span class="pre">Div(1,</span> <span class="pre">y)</span></code>,
but similar to subtraction, there is no class in SymPy for division.  Rather,
division is represented by a power of -1.  Hence, we have <code class="docutils literal notranslate"><span class="pre">Pow(y,</span> <span class="pre">-1)</span></code>.
What if we had divided something other than 1 by <code class="docutils literal notranslate"><span class="pre">y</span></code>, like <code class="docutils literal notranslate"><span class="pre">x/y</span></code>?  Let’s
see.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">srepr</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
<span class="go">&quot;Mul(Symbol(&#39;x&#39;), Pow(Symbol(&#39;y&#39;), Integer(-1)))&quot;</span>
</pre></div>
</div>
<div class="graphviz"><object data="../../_images/graphviz-e6f4eb82779cf86cb8a690155c20c1b3574d70e1.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph{

# Graph style
&quot;rankdir&quot;=&quot;TD&quot;

#########
# Nodes #
#########

&quot;Symbol(x)_(0,)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Symbol('x')&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Symbol(y)_(1, 0)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Symbol('y')&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;NegativeOne()_(1, 1)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Integer(-1)&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Pow(Symbol(y), NegativeOne())_(1,)&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Pow&quot;, &quot;shape&quot;=&quot;ellipse&quot;];
&quot;Mul(Symbol(x), Pow(Symbol(y), NegativeOne()))_()&quot; [&quot;color&quot;=&quot;black&quot;, &quot;label&quot;=&quot;Mul&quot;, &quot;shape&quot;=&quot;ellipse&quot;];

#########
# Edges #
#########

&quot;Pow(Symbol(y), NegativeOne())_(1,)&quot; -&gt; &quot;Symbol(y)_(1, 0)&quot;;
&quot;Pow(Symbol(y), NegativeOne())_(1,)&quot; -&gt; &quot;NegativeOne()_(1, 1)&quot;;
&quot;Mul(Symbol(x), Pow(Symbol(y), NegativeOne()))_()&quot; -&gt; &quot;Symbol(x)_(0,)&quot;;
&quot;Mul(Symbol(x), Pow(Symbol(y), NegativeOne()))_()&quot; -&gt; &quot;Pow(Symbol(y), NegativeOne())_(1,)&quot;;
}</p></object></div>
<p>We see that <code class="docutils literal notranslate"><span class="pre">x/y</span></code> is represented as <code class="docutils literal notranslate"><span class="pre">x*y**-1</span></code>, i.e., <code class="docutils literal notranslate"><span class="pre">Mul(x,</span> <span class="pre">Pow(y,</span>
<span class="pre">-1))</span></code>.</p>
<p>Finally, let’s look at the <code class="docutils literal notranslate"><span class="pre">sin(x*y)/2</span></code> term.  Following the pattern of the
previous example, we might expect to see <code class="docutils literal notranslate"><span class="pre">Mul(sin(x*y),</span> <span class="pre">Pow(Integer(2),</span>
<span class="pre">-1))</span></code>.  But instead, we have <code class="docutils literal notranslate"><span class="pre">Mul(Rational(1,</span> <span class="pre">2),</span> <span class="pre">sin(x*y))</span></code>.  Rational
numbers are always combined into a single term in a multiplication, so that
when we divide by 2, it is represented as multiplying by 1/2.</p>
<p>Finally, one last note.  You may have noticed that the order we entered our
expression and the order that it came out from <code class="docutils literal notranslate"><span class="pre">srepr</span></code> or in the graph were
different.  You may have also noticed this phenomenon earlier in the
tutorial.  For example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span> <span class="o">+</span> <span class="n">x</span>
<span class="go">x + 1</span>
</pre></div>
</div>
<p>This because in SymPy, the arguments of the commutative operations <code class="docutils literal notranslate"><span class="pre">Add</span></code> and
<code class="docutils literal notranslate"><span class="pre">Mul</span></code> are stored in an arbitrary (but consistent!) order, which is
independent of the order inputted (if you’re worried about noncommutative
multiplication, don’t be.  In SymPy, you can create noncommutative Symbols
using <code class="docutils literal notranslate"><span class="pre">Symbol('A',</span> <span class="pre">commutative=False)</span></code>, and the order of multiplication for
noncommutative Symbols is kept the same as the input).  Furthermore, as we
shall see in the next section, the printing order and the order in which
things are stored internally need not be the same either.</p>
<aside class="sidebar">
<p class="sidebar-title">Quick Tip</p>
<p>The way an expression is represented internally and the way it is printed
are often not the same.</p>
</aside>
<p>In general, an important thing to keep in mind when working with SymPy expression
trees is this:  the internal representation of an expression and the way it is
printed need not be the same.  The same is true for the input form.   If some
expression manipulation algorithm is not working in the way you expected it
to, chances are, the internal representation of the object is different from
what you thought it was.</p>
</section>
<section id="recursing-through-an-expression-tree">
<h2>Recursing through an Expression Tree<a class="headerlink" href="#recursing-through-an-expression-tree" title="Link to this heading">#</a></h2>
<p>Now that you know how expression trees work in SymPy, let’s look at how to dig
our way through an expression tree.  Every object in SymPy has two very
important attributes, <code class="docutils literal notranslate"><span class="pre">func</span></code>, and <code class="docutils literal notranslate"><span class="pre">args</span></code>.</p>
<section id="func">
<h3>func<a class="headerlink" href="#func" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">func</span></code> is the head of the object. For example, <code class="docutils literal notranslate"><span class="pre">(x*y).func</span></code> is <code class="docutils literal notranslate"><span class="pre">Mul</span></code>.
Usually it is the same as the class of the object (though there are exceptions
to this rule).</p>
<p>Two notes about <code class="docutils literal notranslate"><span class="pre">func</span></code>.  First, the class of an object need not be the same
as the one used to create it.  For example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="o">.</span><span class="n">func</span>
<span class="go">&lt;class &#39;sympy.core.mul.Mul&#39;&gt;</span>
</pre></div>
</div>
<p>We created <code class="docutils literal notranslate"><span class="pre">Add(x,</span> <span class="pre">x)</span></code>, so we might expect <code class="docutils literal notranslate"><span class="pre">expr.func</span></code> to be <code class="docutils literal notranslate"><span class="pre">Add</span></code>, but
instead we got <code class="docutils literal notranslate"><span class="pre">Mul</span></code>.  Why is that?  Let’s take a closer look at <code class="docutils literal notranslate"><span class="pre">expr</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span>
<span class="go">2*x</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Add(x,</span> <span class="pre">x)</span></code>, i.e., <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">x</span></code>, was automatically converted into <code class="docutils literal notranslate"><span class="pre">Mul(2,</span>
<span class="pre">x)</span></code>, i.e., <code class="docutils literal notranslate"><span class="pre">2*x</span></code>, which is a <code class="docutils literal notranslate"><span class="pre">Mul</span></code>.   SymPy classes make heavy use of the
<code class="docutils literal notranslate"><span class="pre">__new__</span></code> class constructor, which, unlike <code class="docutils literal notranslate"><span class="pre">__init__</span></code>, allows a different
class to be returned from the constructor.</p>
<p>Second, some classes are special-cased, usually for efficiency reasons
<a class="footnote-reference brackets" href="#singleton-fn" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">func</span>
<span class="go">&lt;class &#39;sympy.core.numbers.Integer&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Integer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">func</span>
<span class="go">&lt;class &#39;sympy.core.numbers.Zero&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Integer</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">func</span>
<span class="go">&lt;class &#39;sympy.core.numbers.NegativeOne&#39;&gt;</span>
</pre></div>
</div>
<p>For the most part, these issues will not bother us.  The special classes
<code class="docutils literal notranslate"><span class="pre">Zero</span></code>, <code class="docutils literal notranslate"><span class="pre">One</span></code>, <code class="docutils literal notranslate"><span class="pre">NegativeOne</span></code>, and so on are subclasses of <code class="docutils literal notranslate"><span class="pre">Integer</span></code>,
so as long as you use <code class="docutils literal notranslate"><span class="pre">isinstance</span></code>, it will not be an issue.</p>
</section>
<section id="args">
<h3>args<a class="headerlink" href="#args" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">args</span></code> are the top-level arguments of the object.  <code class="docutils literal notranslate"><span class="pre">(x*y).args</span></code> would be
<code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y)</span></code>.  Let’s look at some examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="mi">3</span><span class="o">*</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="o">.</span><span class="n">func</span>
<span class="go">&lt;class &#39;sympy.core.mul.Mul&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="o">.</span><span class="n">args</span>
<span class="go">(3, x, y**2)</span>
</pre></div>
</div>
<p>From this, we can see that <code class="docutils literal notranslate"><span class="pre">expr</span> <span class="pre">==</span> <span class="pre">Mul(3,</span> <span class="pre">y**2,</span> <span class="pre">x)</span></code>.  In fact, we can see
that we can completely reconstruct <code class="docutils literal notranslate"><span class="pre">expr</span></code> from its <code class="docutils literal notranslate"><span class="pre">func</span></code> and its
<code class="docutils literal notranslate"><span class="pre">args</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
<span class="go">3*x*y**2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">==</span> <span class="n">expr</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Note that although we entered <code class="docutils literal notranslate"><span class="pre">3*y**2*x</span></code>, the <code class="docutils literal notranslate"><span class="pre">args</span></code> are <code class="docutils literal notranslate"><span class="pre">(3,</span> <span class="pre">x,</span> <span class="pre">y**2)</span></code>.
In a <code class="docutils literal notranslate"><span class="pre">Mul</span></code>, the Rational coefficient will come first in the <code class="docutils literal notranslate"><span class="pre">args</span></code>, but
other than that, the order of everything else follows no special pattern.  To
be sure, though, there is an order.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="mi">3</span><span class="o">*</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="o">.</span><span class="n">args</span>
<span class="go">(3, x, y**2)</span>
</pre></div>
</div>
<p>Mul’s <code class="docutils literal notranslate"><span class="pre">args</span></code> are sorted, so that the same <code class="docutils literal notranslate"><span class="pre">Mul</span></code> will have the same
<code class="docutils literal notranslate"><span class="pre">args</span></code>.  But the sorting is based on some criteria designed to make the
sorting unique and efficient that has no mathematical significance.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">srepr</span></code> form of our <code class="docutils literal notranslate"><span class="pre">expr</span></code> is <code class="docutils literal notranslate"><span class="pre">Mul(3,</span> <span class="pre">x,</span> <span class="pre">Pow(y,</span> <span class="pre">2))</span></code>.  What if we
want to get at the <code class="docutils literal notranslate"><span class="pre">args</span></code> of <code class="docutils literal notranslate"><span class="pre">Pow(y,</span> <span class="pre">2)</span></code>.  Notice that the <code class="docutils literal notranslate"><span class="pre">y**2</span></code> is in
the third slot of <code class="docutils literal notranslate"><span class="pre">expr.args</span></code>, i.e., <code class="docutils literal notranslate"><span class="pre">expr.args[2]</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">y**2</span>
</pre></div>
</div>
<p>So to get the <code class="docutils literal notranslate"><span class="pre">args</span></code> of this, we call <code class="docutils literal notranslate"><span class="pre">expr.args[2].args</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">args</span>
<span class="go">(y, 2)</span>
</pre></div>
</div>
<p>Now what if we try to go deeper.  What are the args of <code class="docutils literal notranslate"><span class="pre">y</span></code>.  Or <code class="docutils literal notranslate"><span class="pre">2</span></code>.
Let’s see.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">.</span><span class="n">args</span>
<span class="go">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Integer</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">args</span>
<span class="go">()</span>
</pre></div>
</div>
<p>They both have empty <code class="docutils literal notranslate"><span class="pre">args</span></code>.  In SymPy, empty <code class="docutils literal notranslate"><span class="pre">args</span></code> signal that we have
hit a leaf of the expression tree.</p>
<p>So there are two possibilities for a SymPy expression. Either it has empty
<code class="docutils literal notranslate"><span class="pre">args</span></code>, in which case it is a leaf node in any expression tree, or it has
<code class="docutils literal notranslate"><span class="pre">args</span></code>, in which case, it is a branch node of any expression tree.  When it
has <code class="docutils literal notranslate"><span class="pre">args</span></code>, it can be completely rebuilt from its <code class="docutils literal notranslate"><span class="pre">func</span></code> and its <code class="docutils literal notranslate"><span class="pre">args</span></code>.
This is expressed in the key invariant.</p>
<aside class="topic">
<p class="topic-title">Key Invariant</p>
<p>Every well-formed SymPy expression must either have empty <code class="docutils literal notranslate"><span class="pre">args</span></code> or
satisfy <code class="docutils literal notranslate"><span class="pre">expr</span> <span class="pre">==</span> <span class="pre">expr.func(*expr.args)</span></code>.</p>
</aside>
<p>(Recall that in Python if <code class="docutils literal notranslate"><span class="pre">a</span></code> is a tuple, then <code class="docutils literal notranslate"><span class="pre">f(*a)</span></code> means to call <code class="docutils literal notranslate"><span class="pre">f</span></code>
with arguments from the elements of <code class="docutils literal notranslate"><span class="pre">a</span></code>, e.g., <code class="docutils literal notranslate"><span class="pre">f(*(1,</span> <span class="pre">2,</span> <span class="pre">3))</span></code> is the same
as <code class="docutils literal notranslate"><span class="pre">f(1,</span> <span class="pre">2,</span> <span class="pre">3)</span></code>.)</p>
<p>This key invariant allows us to write simple algorithms that walk expression
trees, change them, and rebuild them into new expressions.</p>
</section>
<section id="walking-the-tree">
<h3>Walking the Tree<a class="headerlink" href="#walking-the-tree" title="Link to this heading">#</a></h3>
<p>With this knowledge, let’s look at how we can recurse through an expression
tree.  The nested nature of <code class="docutils literal notranslate"><span class="pre">args</span></code> is a perfect fit for recursive functions.
The base case will be empty <code class="docutils literal notranslate"><span class="pre">args</span></code>.  Let’s write a simple function that goes
through an expression and prints all the <code class="docutils literal notranslate"><span class="pre">args</span></code> at each level.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">pre</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">pre</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</pre></div>
</div>
<p>See how nice it is that <code class="docutils literal notranslate"><span class="pre">()</span></code> signals leaves in the expression tree.  We
don’t even have to write a base case for our recursion; it is handled
automatically by the for loop.</p>
<p>Let’s test our function.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pre</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
<span class="go">x*y + 1</span>
<span class="go">1</span>
<span class="go">x*y</span>
<span class="go">x</span>
<span class="go">y</span>
</pre></div>
</div>
<p>Can you guess why we called our function <code class="docutils literal notranslate"><span class="pre">pre</span></code>?  We just wrote a pre-order
traversal function for our expression tree.   See if you can write a
post-order traversal function.</p>
<p>Such traversals are so common in SymPy that the generator functions
<code class="docutils literal notranslate"><span class="pre">preorder_traversal</span></code> and <code class="docutils literal notranslate"><span class="pre">postorder_traversal</span></code> are provided to make such
traversals easy.  We could have also written our algorithm as</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">preorder_traversal</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
<span class="go">x*y + 1</span>
<span class="go">1</span>
<span class="go">x*y</span>
<span class="go">x</span>
<span class="go">y</span>
</pre></div>
</div>
</section>
</section>
<section id="prevent-expression-evaluation">
<h2>Prevent expression evaluation<a class="headerlink" href="#prevent-expression-evaluation" title="Link to this heading">#</a></h2>
<p>There are generally two ways to prevent the evaluation, either pass an
<code class="docutils literal notranslate"><span class="pre">evaluate=False</span></code> parameter while constructing the expression, or create
an evaluation stopper by wrapping the expression with <code class="docutils literal notranslate"><span class="pre">UnevaluatedExpr</span></code>.</p>
<p>For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="n">Add</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy.abc</span> <span class="kn">import</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">+</span> <span class="n">x</span>
<span class="go">2*x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="go">2*x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">evaluate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">x + x</span>
</pre></div>
</div>
<p>If you don’t remember the class corresponding to the expression you
want to build (operator overloading usually assumes <code class="docutils literal notranslate"><span class="pre">evaluate=True</span></code>),
just use <code class="docutils literal notranslate"><span class="pre">sympify</span></code> and pass a string:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="n">sympify</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sympify</span><span class="p">(</span><span class="s2">&quot;x + x&quot;</span><span class="p">,</span> <span class="n">evaluate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">x + x</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">evaluate=False</span></code> won’t prevent future evaluation in later
usages of the expression:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">evaluate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span>
<span class="go">x + x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">+</span> <span class="n">x</span>
<span class="go">3*x</span>
</pre></div>
</div>
<p>That’s why the class <code class="docutils literal notranslate"><span class="pre">UnevaluatedExpr</span></code> comes handy.
<code class="docutils literal notranslate"><span class="pre">UnevaluatedExpr</span></code> is a method provided by SymPy which lets the user keep
an expression unevaluated. By <em>unevaluated</em> it is meant that the value
inside of it will not interact with the expressions outside of it to give
simplified outputs. For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="n">UnevaluatedExpr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">UnevaluatedExpr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span>
<span class="go">x + x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">+</span> <span class="n">expr</span>
<span class="go">2*x + x</span>
</pre></div>
</div>
<p>The <span class="math notranslate nohighlight">\(x\)</span> remaining alone is the <span class="math notranslate nohighlight">\(x\)</span> wrapped by <code class="docutils literal notranslate"><span class="pre">UnevaluatedExpr</span></code>.
To release it:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">expr</span><span class="p">)</span><span class="o">.</span><span class="n">doit</span><span class="p">()</span>
<span class="go">3*x</span>
</pre></div>
</div>
<p>Other examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy.abc</span> <span class="kn">import</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uexpr</span> <span class="o">=</span> <span class="n">UnevaluatedExpr</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">One</span><span class="o">*</span><span class="mi">5</span><span class="o">/</span><span class="mi">7</span><span class="p">)</span><span class="o">*</span><span class="n">UnevaluatedExpr</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">One</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uexpr</span>
<span class="go">(5/7)*(3/4)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">*</span><span class="n">UnevaluatedExpr</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
<span class="go">x*1/x</span>
</pre></div>
</div>
<p>A point to be noted is that  <code class="docutils literal notranslate"><span class="pre">UnevaluatedExpr</span></code> cannot prevent the
evaluation of an expression which is given as argument. For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expr1</span> <span class="o">=</span> <span class="n">UnevaluatedExpr</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr1</span>
<span class="go">2*x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr2</span> <span class="o">=</span> <span class="n">sympify</span><span class="p">(</span><span class="s1">&#39;x + x&#39;</span><span class="p">,</span> <span class="n">evaluate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expr2</span>
<span class="go">x + x</span>
</pre></div>
</div>
<p>Remember that <code class="docutils literal notranslate"><span class="pre">expr2</span></code> will be evaluated if included into another
expression. Combine both of the methods to prevent both inside and outside
evaluations:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">UnevaluatedExpr</span><span class="p">(</span><span class="n">sympify</span><span class="p">(</span><span class="s2">&quot;x + x&quot;</span><span class="p">,</span> <span class="n">evaluate</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span> <span class="o">+</span> <span class="n">y</span>
<span class="go">y + (x + x)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">UnevaluatedExpr</span></code> is supported by SymPy printers and can be used to print the
result in different output forms. For example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="n">latex</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uexpr</span> <span class="o">=</span> <span class="n">UnevaluatedExpr</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">One</span><span class="o">*</span><span class="mi">5</span><span class="o">/</span><span class="mi">7</span><span class="p">)</span><span class="o">*</span><span class="n">UnevaluatedExpr</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">One</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">latex</span><span class="p">(</span><span class="n">uexpr</span><span class="p">))</span>
<span class="go">\frac{5}{7} \cdot \frac{3}{4}</span>
</pre></div>
</div>
<p>In order to release the expression and get the evaluated LaTeX form,
just use <code class="docutils literal notranslate"><span class="pre">.doit()</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">latex</span><span class="p">(</span><span class="n">uexpr</span><span class="o">.</span><span class="n">doit</span><span class="p">()))</span>
<span class="go">\frac{15}{28}</span>
</pre></div>
</div>
<p class="rubric">Footnotes</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="symbols-fn" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>We have been using <code class="docutils literal notranslate"><span class="pre">symbols</span></code> instead of <code class="docutils literal notranslate"><span class="pre">Symbol</span></code> because it
automatically splits apart strings into multiple <code class="docutils literal notranslate"><span class="pre">Symbol</span></code>s.
<code class="docutils literal notranslate"><span class="pre">symbols('x</span> <span class="pre">y</span> <span class="pre">z')</span></code> returns a tuple of three <code class="docutils literal notranslate"><span class="pre">Symbol</span></code>s.  <code class="docutils literal notranslate"><span class="pre">Symbol('x</span> <span class="pre">y</span>
<span class="pre">z')</span></code> returns a single <code class="docutils literal notranslate"><span class="pre">Symbol</span></code> called <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">y</span> <span class="pre">z</span></code>.</p>
</aside>
<aside class="footnote brackets" id="sympify-fn" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Technically, it is an internal function called <code class="docutils literal notranslate"><span class="pre">_sympify</span></code>,
which differs from <code class="docutils literal notranslate"><span class="pre">sympify</span></code> in that it does not convert strings.  <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span>
<span class="pre">'2'</span></code> is not allowed.</p>
</aside>
<aside class="footnote brackets" id="singleton-fn" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>Classes like <code class="docutils literal notranslate"><span class="pre">One</span></code> and <code class="docutils literal notranslate"><span class="pre">Zero</span></code> are singletonized, meaning
that only one object is ever created, no matter how many times the class is
called.  This is done for space efficiency, as these classes are very
common.  For example, <code class="docutils literal notranslate"><span class="pre">Zero</span></code> might occur very often in a sparse matrix
represented densely.  As we have seen, <code class="docutils literal notranslate"><span class="pre">NegativeOne</span></code> occurs any time we
have <code class="docutils literal notranslate"><span class="pre">-x</span></code> or <code class="docutils literal notranslate"><span class="pre">1/x</span></code>.  It is also done for speed efficiency because
singletonized objects can be compared by <code class="docutils literal notranslate"><span class="pre">is</span></code>.  The unique objects for
each singletonized class can be accessed from the <code class="docutils literal notranslate"><span class="pre">S</span></code> object.</p>
</aside>
</aside>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="next.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">What’s Next</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="matrices.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Matrices</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023 SymPy Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on Sep 02, 2023</div>
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/sympy/sympy" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Advanced Expression Manipulation</a><ul>
<li><a class="reference internal" href="#understanding-expression-trees">Understanding Expression Trees</a></li>
<li><a class="reference internal" href="#recursing-through-an-expression-tree">Recursing through an Expression Tree</a><ul>
<li><a class="reference internal" href="#func">func</a></li>
<li><a class="reference internal" href="#args">args</a></li>
<li><a class="reference internal" href="#walking-the-tree">Walking the Tree</a></li>
</ul>
</li>
<li><a class="reference internal" href="#prevent-expression-evaluation">Prevent expression evaluation</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../_static/documentation_options.js?v=0a77fd74"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=30646c52"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]]}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>